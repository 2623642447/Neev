<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http:mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dhh.tcm.dao.PrescriptionMapper">
    <resultMap id="prescriptionMapper" type="indi.zyang.neev.entity.Prescription">
        <id property="prescriptionId" column="prescriptionId"/>
    </resultMap>

    <select id="findPrescriptionByPrescriptionId" resultMap="prescriptionMapper">
        select * from prescription where prescriptionId = #{prescriptionId}
    </select>
    <select id="findPrescriptionByPrescriptionInfoId" resultMap="prescriptionMapper">
        select * from prescription
        where prescriptionId =
        (select prescriptionId from prescription_info
        where prescriptionInfoId = #{prescriptionInfoId})
    </select>
    <select id="findPrescriptionByPrescriptionName" resultMap="prescriptionMapper">
        select * from prescription
        where prescriptionName like concat("%", #{prescriptionName}, "%")
    </select>
    <select id="findPrescriptionByPage" resultMap="prescriptionMapper">
        select * from prescription limit #{start}, #{size}
    </select>
    <select id="searchPrescription" resultMap="prescriptionMapper">
        select * from prescription
        where prescriptionName like concat("%", #{content}, "%")
    </select>
    <select id="searchPrescriptionCount" resultType="int">
        select count(*) from prescription
        where prescriptionName like concat("%", #{content}, "%")
    </select>

    <insert id="insertPrescription" parameterType="prescription" useGeneratedKeys="true" keyColumn="prescriptionId" keyProperty="prescriptionId">
        insert into prescription(prescriptionName) values(#{prescriptionName})
    </insert>

    <update id="updatePrescription" parameterType="prescription">
        update prescription
        set prescriptionName = #{prescriptionName}
        where prescriptionId = #{prescriptionId}
    </update>

    <delete id="deletePrescriptionByPrescriptionId" parameterType="int">
        delete from prescription where prescriptionId = #{prescriptionId}
    </delete>
</mapper>