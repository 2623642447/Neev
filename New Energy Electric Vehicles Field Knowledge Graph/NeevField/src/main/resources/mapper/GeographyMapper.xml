<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http:mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="indi.zyang.neev.dao.GeographyMapper">
    <resultMap id="geographyMapper" type="indi.zyang.neev.entity.Geography">
        <id property="geographyId" column="geographyId"/>
    </resultMap>
    
    <select id="findGeographyByGeographyId" resultMap="geographyMapper">
        select * from geography where geographyId = #{geographyId}
    </select>
    <select id="findGeographyByGeographyName" resultMap="geographyMapper">
        select * from geography
        where continent like concat("%",#{geographyName},"%")
        or country like concat("%",#{geographyName},"%")
        or province like concat("%",#{geographyName},"%")
        or city like concat("%",#{geographyName},"%")
    </select>
    <select id="findGeographyBySign" resultMap="geographyMapper">
        select * from geography where sign = #{sign}
    </select>
    <select id="findGeographyByNameAndSign" resultMap="geographyMapper">
        select * from geography
        where (continent like concat("%",#{geographyName},"%")
        or country like concat("%",#{geographyName},"%")
        or province like concat("%",#{geographyName},"%")
        or city like concat("%",#{geographyName},"%"))
        and sign = #{sign}
    </select>
    <select id="findGeographyByHerbInfoId" resultMap="geographyMapper">
        select * from geography
        where geographyId in
        (select geographyId from hi_g_r where herbInfoId = #{herbInfoId})
    </select>
    <select id="findGeographySonBySuperior" resultMap="geographyMapper">
        select * from geography
        where superior = #{superior}
    </select>

    <insert id="insertGeography" parameterType="geography" useGeneratedKeys="true" keyProperty="geographyId" keyColumn="geographyId">
        insert into geography(continent, country, province, city, superior, sign)
        values(#{continent}, #{country}, #{province}, #{city}, #{superior}, #{sign})
    </insert>

    <update id="updateGeography" parameterType="geography">
        update geography
        set continent = #{continent}, country = #{country}, province = #{province}, city = #{city}, superior = #{superior}, sign = #{sign}
        where geographyId = #{geographyId}
    </update>

    <delete id="deleteGeographyByGeographyId" parameterType="int">
        delete from geography where geographyId = #{geographyId}
    </delete>
</mapper>